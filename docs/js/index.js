!function(e){var t={};function s(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=1)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vector3ToArrayIndex=function(e,t,s,i=32){return i*i*e+i*t+s},t.arrayIndexToVector3=function(e,t=32){return new BABYLON.Vector3(e/(t*t)>>0,e/t%t>>0,e%t>>0)},t.vector2ToArrayIndex=function(e,t,s=32){return s*e+t},t.arrayIndexToVector2=function(e,t=32){return new BABYLON.Vector2(e/t>>0,e%t>>0)},t.fillArrayWithEmptiness=function(e,t=32768){e.length=0;for(let s=0;s<t;s++)e.push(0)},t.getNextNonZeroValueIndex=function(e,t){for(let s=t+1;s<e.length;s++)if(0!==e[s])return s;return-1},t.forX=function(e,t,s,i=1){for(let r=e;r<t;r+=i)s(r)},t.getLocalPosition=function(e){const t=e.x%32,s=(e.x-t)/32,i=e.y%32,r=(e.y-i)/32,n=e.z%32,o=(e.z-n)/32;return[new BABYLON.Vector3(s,r,o),new BABYLON.Vector3(t>>0,i>>0,n>>0)]}},function(e,t,s){"use strict";var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))(function(r,n){function o(e){try{h(i.next(e))}catch(e){n(e)}}function a(e){try{h(i.throw(e))}catch(e){n(e)}}function h(e){e.done?r(e.value):new s(function(t){t(e.value)}).then(o,a)}h((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=s(2),n=s(4);class o{init(){return i(this,void 0,void 0,function*(){this.engine=new r.VoxelEngine({canvasElement:"app"}),this.engine.initialize().start();const e=yield(yield fetch("assets/conf/default/material-info.json")).json(),t=yield(yield fetch("assets/conf/default/blocks-mapping.json")).json(),s=yield(yield fetch("assets/conf/default/blocks-definition.json")).json();this.engine.loadMaterial(Object.assign({},e,s,t));this.simplexMap=n.ChunkBuilder.createSimplexNoiseMap(640,640,32,.01),this.engine.evtChunkIsNeeded=e=>{console.info("Asked for chunk ",e.x,e.y,e.z);const t=n.ChunkBuilder.inflateSimplexNoiseMapToChunk(this.simplexMap,e.x,e.y,e.z);return console.log(t),t}})}}t.Game=o,(new o).init()},function(e,t,s){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=s(3),n=i(s(0));t.VoxelEngine=class{constructor(e){this.region={chunks:{}},this.lastPosition=new BABYLON.Vector3(0,0,0),this._gameMaterialRepo={},this.first=!0,this.hasBeenInit=!0,this._options=Object.assign({},e)}initialize(){if(this._engine)return console.info("Engine already started"),this;this._canvas=document.getElementById(this._options.canvasElement),this._engine=new BABYLON.Engine(this._canvas,!0),this._scene=new BABYLON.Scene(this._engine),this._scene.blockMaterialDirtyMechanism=!0;const e=new BABYLON.HemisphericLight("",new BABYLON.Vector3(0,5,0),this._scene);return e.intensityMode=BABYLON.Light.LIGHTTYPEID_HEMISPHERICLIGHT,e.intensity=.3,this._scene.ambientColor=new BABYLON.Color3(.3,.3,.3),this._scene.clearColor=BABYLON.Color4.FromColor3(new BABYLON.Color3(135/255,206/255,250/255)),this._camera=new BABYLON.UniversalCamera("MainCharcter",new BABYLON.Vector3(0,31,0),this._scene),this._camera.setTarget(new BABYLON.Vector3(5,2,5)),this._camera.attachControl(this._canvas,!1),this._camera.inputs.removeByType("FreeCameraKeyboardMoveInput"),this._camera.inputs.add(new r.FreeCameraKeyboardRotateInput(this._camera)),this}loadMaterial(e){this._gameMaterialRepo[e.name]=e,this.processMaterial(e.name)}processMaterial(e){const t=this._gameMaterialRepo[e];t.texture=new BABYLON.Texture(t.texturePath,this._scene,void 0,void 0,1),t.material=new BABYLON.StandardMaterial(t.name,this._scene),t.texture.hasAlpha=!0,t.material.diffuseTexture=t.texture,t.material.ambientColor=BABYLON.Color3.White(),t.material.diffuseTexture.level=4,t.sps=new BABYLON.SolidParticleSystem(e,this._scene)}getTex(e,t){return new BABYLON.Vector4(1/16*e+1/512,1/16*t+1/512,1/16*e+1/16-1/512,1/16*t+1/16-1/512)}updateGameLoop(){const[e,t]=n.getLocalPosition(this._camera.position);if(this.evtChunkIsNeeded){if(this.first){this.first=!1;for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)if(!this.region.chunks[`${e}-0-${t}`]){const s=this.evtChunkIsNeeded(new BABYLON.Vector3(e,0,t));this.addChunkToScene("default",s,new BABYLON.Vector3(32*e,0,32*t)),this.hasBeenInit&&this._scene.selectionOctree.addMesh(this.addChunkToScene("default",s,new BABYLON.Vector3(32*e,0,32*t))),this.region.chunks[`${e}-0-${t}`]=s,this.hasBeenInit&&this._scene.updateTransformMatrix(),this.hasBeenInit&&this._scene.createOrUpdateSelectionOctree()}}else if(!this.region.chunks[`${e.x}-${e.y}-${e.z}`]){const t=this.evtChunkIsNeeded(e);this._scene.selectionOctree.addMesh(this.addChunkToScene("default",t,new BABYLON.Vector3(32*e.x,32*e.y,32*e.z))),this.hasBeenInit&&(this.region.chunks[`${e.x}-${e.y}-${e.z}`]=t),this.hasBeenInit&&this._scene.updateTransformMatrix(),this._scene.createOrUpdateSelectionOctree()}1===this.region.chunks[`${e.x}-${e.y}-${e.z}`].data[n.vector3ToArrayIndex(t.x,t.y,t.z,32)]||1===this.region.chunks[`${e.x}-${e.y}-${e.z}`].data[n.vector3ToArrayIndex(t.x,t.y-1,t.z,32)]||1===this.region.chunks[`${e.x}-${e.y}-${e.z}`].data[n.vector3ToArrayIndex(t.x,t.y-2,t.z,32)]?console.log("collide"):this.lastPosition=this._camera.position.clone()}}gameLoop(){}addChunkToScene(e,t,s){this.globalSPS||(this.globalSPS=new BABYLON.SolidParticleSystem("s",this._scene));let i=100*Math.random()%15>>0,r=100*Math.random()%15>>0;i=15,r=3;const o=BABYLON.MeshBuilder.CreateTiledBox("box",{width:1,height:1,depth:1,faceUV:[this.getTex(3,15),this.getTex(3,15),this.getTex(3,15),this.getTex(3,15),this.getTex(11,14),this.getTex(4,11)]},this._scene),a=BABYLON.MeshBuilder.CreateTiledBox("box",{width:1,height:1,depth:1,faceUV:[this.getTex(13,3),this.getTex(13,3),this.getTex(13,3),this.getTex(13,3),this.getTex(13,3),this.getTex(13,3)]},this._scene),h=new BABYLON.SolidParticleSystem(performance.now().toString(),this._scene);let c=0;return h.addShape(o,t.rcDataSize,{positionFunction:(e,s,i)=>{c=n.getNextNonZeroValueIndex(t.rcData,c),e.position=n.arrayIndexToVector3(c)}}),o.dispose(),n.forX(0,32,e=>{n.forX(0,32,s=>{0===t.rcData[n.vector3ToArrayIndex(e,6,s)]&&(t.rcData[n.vector3ToArrayIndex(e,6,s)]=1.002,t.data[n.vector3ToArrayIndex(e,6,s)]=1.002,h.addShape(a,1,{positionFunction:(t,i,r)=>{t.position=new BABYLON.Vector3(e,6,s)}}))})}),a.dispose(),h.mesh?h.rebuildMesh():h.buildMesh(),h.mesh.material||(h.mesh.material=this._gameMaterialRepo[e].material),h.computeBoundingBox=!0,h.mesh.position=s,h.mesh.computeWorldMatrix(),h.setParticles(),setInterval(()=>{if(h.mesh.isVisible=h.mesh.isInFrustum(this._scene.frustumPlanes),h.mesh.isVisible){let e=h.mesh.position,t=this._camera.position,s=160;(Math.abs(e.x-t.x)>s||Math.abs(e.y-t.y)>s||Math.abs(e.z-t.z)>s)&&(h.mesh.isVisible=!1)}},500),h.mesh.freezeNormals(),h.mesh.freezeWorldMatrix(),h.mesh}start(){let e=0;const t=document.createElement("div");t.style.position="absolute",t.style.width="25px",t.style.height="25px",t.style.top="0px",t.style.left="0px",t.style.backgroundColor="white",t.style.textAlign="center",t.style.lineHeight="25px",t.style.zIndex="9999",document.body.appendChild(t),this._scene.createOrUpdateSelectionOctree(8,1),this.hasBeenInit=!0,this._engine.runRenderLoop(()=>{this.gameLoop(),this._scene.createOrUpdateSelectionOctree(),this._scene.meshes.forEach(e=>e.isVisible=e.isInFrustum(this._scene.frustumPlanes)),this._scene.render(),e++}),window.game=this,setInterval(()=>(t.innerText=e.toString(),e=0),1e3),window.addEventListener("resize",()=>{this._engine.resize()})}}},function(e,t,s){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.KeyLeft="KeyLeft",e.KeyRight="KeyRight",e.KeyForward="KeyForward",e.KeyBackward="KeyBackward",e.KeyMoveUp="KeyMoveUp",e.KeyMoveDown="KeyMoveDown",e.KeyTurnLeft="KeyTurnLeft",e.KeyTurnRight="KeyTurnRight",e.KeyUp="KeyUp",e.KeyDown="KeyDown"}(i||(i={}));t.FreeCameraKeyboardRotateInput=class{constructor(e){this._noPreventDefault=!1,this._keys=[],this._keysLeft=[65],this._keysRight=[68],this._keysForward=[87],this._keysBackward=[83],this._keysMoveUp=[32],this._keysMoveDown=[16],this._keysTurnLeft=[39],this._keysTurnRight=[37],this._keysUp=[38],this._keysDown=[40],this._sensibility=.005,this._movementSpeed=.05,this._onKeyDown=e=>{-1===this._keysLeft.indexOf(e.keyCode)&&-1===this._keysRight.indexOf(e.keyCode)&&-1===this._keysForward.indexOf(e.keyCode)&&-1===this._keysBackward.indexOf(e.keyCode)&&-1===this._keysMoveUp.indexOf(e.keyCode)&&-1===this._keysMoveDown.indexOf(e.keyCode)&&-1===this._keysTurnLeft.indexOf(e.keyCode)&&-1===this._keysTurnRight.indexOf(e.keyCode)&&-1===this._keysUp.indexOf(e.keyCode)&&-1===this._keysDown.indexOf(e.keyCode)||(-1===this._keys.indexOf(e.keyCode)&&this._keys.push(e.keyCode),this._noPreventDefault||e.preventDefault())},this._onKeyUp=e=>{if(-1!==this._keysLeft.indexOf(e.keyCode)||-1!==this._keysRight.indexOf(e.keyCode)||-1!==this._keysForward.indexOf(e.keyCode)||-1!==this._keysBackward.indexOf(e.keyCode)||-1!==this._keysMoveUp.indexOf(e.keyCode)||-1!==this._keysMoveDown.indexOf(e.keyCode)||-1!==this._keysTurnLeft.indexOf(e.keyCode)||-1!==this._keysTurnRight.indexOf(e.keyCode)||-1!==this._keysUp.indexOf(e.keyCode)||-1!==this._keysDown.indexOf(e.keyCode)){var t=this._keys.indexOf(e.keyCode);t>=0&&this._keys.splice(t,1),this._noPreventDefault||e.preventDefault()}},this.camera=e}setKeycode(e,t){switch(t){case i.KeyLeft:this._keysLeft.length=0,this._keysLeft.push(e);break;case i.KeyRight:this._keysRight.length=0,this._keysRight.push(e);break;case i.KeyForward:this._keysForward.length=0,this._keysForward.push(e);break;case i.KeyBackward:this._keysBackward.length=0,this._keysBackward.push(e);break;case i.KeyMoveUp:this._keysMoveUp.length=0,this._keysMoveUp.push(e);break;case i.KeyMoveDown:this._keysMoveDown.length=0,this._keysMoveDown.push(e);break;case i.KeyTurnLeft:this._keysTurnLeft.length=0,this._keysTurnLeft.push(e);break;case i.KeyTurnRight:this._keysTurnRight.length=0,this._keysTurnRight.push(e);break;case i.KeyUp:this._keysUp.length=0,this._keysUp.push(e);break;case i.KeyDown:this._keysDown.length=0,this._keysDown.push(e)}}_onLostFocus(e){this._keys=[]}getClassName(){return"FreeCameraKeyboardRotateInput"}getSimpleName(){return"keyboardRotate"}toggleFullScreen(){var e=window.document,t=e.documentElement,s=t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen||t.msRequestFullscreen,i=e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen;e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement?i.call(e):s.call(t)}attachControl(e,t){this._noPreventDefault=!!t,e.tabIndex=1,e.addEventListener("keydown",this._onKeyDown,!1),e.addEventListener("keyup",this._onKeyUp,!1),BABYLON.Tools.RegisterTopRootEvents([{name:"blur",handler:this._onLostFocus}]);let s=!1;function i(){void 0!==document.fullscreen?s=document.fullscreen:void 0!==document.mozFullScreen?s=document.mozFullScreen:void 0!==document.webkitIsFullScreen?s=document.webkitIsFullScreen:void 0!==document.msIsFullScreen&&(s=document.msIsFullScreen)}document.addEventListener("fullscreenchange",i,!1),document.addEventListener("mozfullscreenchange",i,!1),document.addEventListener("webkitfullscreenchange",i,!1),document.addEventListener("msfullscreenchange",i,!1),document.querySelector("canvas").onclick=function(){s||BABYLON.Tools.RequestFullscreen(e)},this.camera.getScene().onPointerDown=e=>{{let e=document.querySelector("canvas");e.requestPointerLock=e.requestPointerLock||e.msRequestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock&&e.requestPointerLock()}}}detachControl(e){e&&(e.removeEventListener("keydown",this._onKeyDown),e.removeEventListener("keyup",this._onKeyUp),BABYLON.Tools.UnregisterTopRootEvents([{name:"blur",handler:this._onLostFocus}]),this._keys=[])}checkInputs(){if(!this.camera)return;const e=this.camera;for(let r=0;r<this._keys.length;r++){const n=this._keys[r],o=e.getTarget().subtract(e.position).x,a=e.getTarget().subtract(e.position).y,h=e.getTarget().subtract(e.position).z;if(-1===this._keysLeft.indexOf(n))-1===this._keysRight.indexOf(n)?-1===this._keysForward.indexOf(n)?-1===this._keysBackward.indexOf(n)?-1===this._keysMoveUp.indexOf(n)?-1===this._keysMoveDown.indexOf(n)?-1===this._keysTurnLeft.indexOf(n)?-1===this._keysTurnRight.indexOf(n)?-1===this._keysUp.indexOf(n)?-1===this._keysDown.indexOf(n)||(e.position.y-=1):e.position.y+=1:e.cameraRotation.y-=this._sensibility:e.cameraRotation.y+=this._sensibility:e.cameraDirection.y-=.5*this._movementSpeed:e.cameraDirection.y+=.5*this._movementSpeed:(e.cameraDirection.x-=this._movementSpeed*o,e.cameraDirection.y-=this._movementSpeed*a,e.cameraDirection.z-=this._movementSpeed*h):(e.cameraDirection.x+=this._movementSpeed*o,e.cameraDirection.y+=this._movementSpeed*a,e.cameraDirection.z+=this._movementSpeed*h):(t=h*h,s=o*o,i=1/Math.sqrt(t+s),e.cameraDirection.x+=this._movementSpeed*h*i,e.cameraDirection.z-=this._movementSpeed*o*i);else{var t=h*h,s=o*o,i=1/Math.sqrt(t+s);e.cameraDirection.x-=this._movementSpeed*h*i,e.cameraDirection.z+=this._movementSpeed*o*i}}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(5),r=s(0),n=s(6);class o{static create(e=32){const t={data:[],dataSize:0,rcData:[],rcDataSize:0,size:e};return r.fillArrayWithEmptiness(t.data,e*e*e),t}static createSimplexNoiseMap(e,t,s=32,n=.015,o=4,a=2,h=1){const c=new i.SimplexNoise;c.init(),c.noiseDetail(45,.34567);const d=new Array;r.fillArrayWithEmptiness(d,e*t);let l=[];for(let i=0;i<e;i++){for(let o=0;o<t;o++)d[r.vector2ToArrayIndex(i,o,e)]=c.noise(i*n,o*n)*s/1.34>>0;l.length=0}return d}static inflateSimplexNoiseMapToChunk(e,t,s,i,n=32){const a=o.create(n);return r.forX(t*n,t*n+n,t=>{r.forX(i*n,i*n+n,i=>{let o=e[r.vector2ToArrayIndex(t,i,Math.sqrt(e.length))]-s*n;o<0&&(o=0),r.forX(s,o,e=>{a.data[r.vector3ToArrayIndex(t%32,e%32,i%32,n)]=1,a.dataSize++})})}),[a.rcData,a.rcDataSize]=o.simplifyMatrix3D(a.data),a}static simplifyMatrix3D(e){let t=0;const s=new Array,i=Math.cbrt(e.length),o=(e,t,s,n)=>{return!(t<0||(t>=i||s<0||s>=i||n<0||n>=i))&&0!==e[r.vector3ToArrayIndex(t,s,n,i)]};return e.forEach((a,h)=>{let c=s.push(a)-1;if(0===a)return;let d=63;const l=r.arrayIndexToVector3(h,i);o(e,l.x+1,l.y,l.z)&&(d-=n.Side.Backward),o(e,l.x-1,l.y,l.z)&&(d-=n.Side.Forward),o(e,l.x,l.y+1,l.z)&&(d-=n.Side.Left),o(e,l.x,l.y-1,l.z)&&(d-=n.Side.Right),o(e,l.x,l.y,l.z+1)&&(d-=n.Side.Top),o(e,l.x,l.y,l.z-1)&&(d-=n.Side.Bottom),s[c]=d,0!==d&&t++,0===l.y&&(s[c]=0)}),[s,t]}}t.ChunkBuilder=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SimplexNoise=class{constructor(){this.iOctaves=1,this.fPersistence=.5,this.F2=.5*(Math.sqrt(3)-1),this.G2=(3-Math.sqrt(3))/6,this.F3=1/3,this.G3=1/6,this.F4=(Math.sqrt(5)-1)/4,this.G4=5-Math.sqrt(5)/20,this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512),this.p=new Uint8Array(256),this.grad3=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),this.grad4=new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0])}octaveFreq(){let e,t;this.aOctFreq=new Array,this.aOctPers=new Array,this.fPersMax=0;for(var s=0;s<this.iOctaves;s++)e=Math.pow(2,s),t=Math.pow(this.fPersistence,s),this.fPersMax+=t,this.aOctFreq.push(e),this.aOctPers.push(t);this.fPersMax=1/this.fPersMax}seed(e){return 1-((e^=e<<13)*(e*e*15731+789221)+1376312589&2147483647)/1073741824}init(){for(var e=0;e<256;e++)this.p[e]=Math.abs(~~(256*this.seed(e)));for(e=0;e<512;e++)this.perm[e]=this.p[255&e],this.permMod12[e]=this.perm[e]%12}noise2D(e,t){var s,i,r,n,o,a=(e+t)*this.F2,h=Math.floor(e+a),c=Math.floor(t+a),d=(h+c)*this.G2,l=e-(h-d),u=t-(c-d);l>u?(n=1,o=0):(n=0,o=1);var y=l-n+this.G2,f=u-o+this.G2,m=l-1+2*this.G2,p=u-1+2*this.G2,_=255&h,g=255&c,k=.5-l*l-u*u;if(k<0)s=0;else{var v=this.permMod12[_+this.perm[g]];s=(k*=k)*k*(this.grad3[v]*l+this.grad3[v+1]*u)}var x=.5-y*y-f*f;if(x<0)i=0;else{var w=this.permMod12[_+n+this.perm[g+o]];i=(x*=x)*x*(this.grad3[w]*y+this.grad3[w+1]*f)}var O=.5-m*m-p*p;if(O<0)r=0;else{var M=this.permMod12[_+1+this.perm[g+1]];r=(O*=O)*O*(this.grad3[M]*m+this.grad3[M+1]*p)}return 70*(s+i+r)}noise3D(e,t,s){var i,r,n,o,a,h,c,d,l,u,y=(e+t+s)*this.F3,f=Math.floor(e+y),m=Math.floor(t+y),p=Math.floor(s+y),_=(f+m+p)*this.G3,g=e-(f-_),k=t-(m-_),v=s-(p-_);g>=k?k>=v?(a=1,h=0,c=0,d=1,l=1,u=0):g>=v?(a=1,h=0,c=0,d=1,l=0,u=1):(a=0,h=0,c=1,d=1,l=0,u=1):k<v?(a=0,h=0,c=1,d=0,l=1,u=1):g<v?(a=0,h=1,c=0,d=0,l=1,u=1):(a=0,h=1,c=0,d=1,l=1,u=0);var x=g-a+this.G3,w=k-h+this.G3,O=v-c+this.G3,M=g-d+2*this.G3,B=k-l+2*this.G3,L=v-u+2*this.G3,T=g-1+3*this.G3,b=k-1+3*this.G3,S=v-1+3*this.G3,A=255&f,F=255&m,C=255&p,D=.6-g*g-k*k-v*v;if(D<0)i=0;else{D*=D;var P=this.permMod12[A+this.perm[F+this.perm[C]]];i=D*D*(this.grad3[P]*g+this.grad3[P+1]*k+this.grad3[P+2]*v)}var I=.6-x*x-w*w-O*O;if(I<0)r=0;else{I*=I;var N=this.permMod12[A+a+this.perm[F+h+this.perm[C+c]]];r=I*I*(this.grad3[N]*x+this.grad3[N+1]*w+this.grad3[N+2]*O)}var R=.6-M*M-B*B-L*L;if(R<0)n=0;else{R*=R;var z=this.permMod12[A+d+this.perm[F+l+this.perm[C+u]]];n=R*R*(this.grad3[z]*M+this.grad3[z+1]*B+this.grad3[z+2]*L)}var K=.6-T*T-b*b-S*S;if(K<0)o=0;else{K*=K;var G=this.permMod12[A+1+this.perm[F+1+this.perm[C+1]]];o=K*K*(this.grad3[G]*T+this.grad3[G+1]*b+this.grad3[G+2]*S)}return 32*(i+r+n+o)}noise4D(e,t,s,i){var r,n,o,a,h,c,d,l,u,y,f,m,p,_,g,k,v,x=(e+t+s+i)*this.F4,w=Math.floor(e+x),O=Math.floor(t+x),M=Math.floor(s+x),B=Math.floor(i+x),L=(w+O+M+B)*this.G4,T=e-(w-L),b=t-(O-L),S=s-(s-L),A=i-(i-L),F=0,C=0,D=0,P=0;T>b?F++:C++,T>S?F++:D++,T>A?F++:P++,b>S?C++:D++,b>A?C++:P++,S>A?D++:P++,d=C>=3?1:0,l=D>=3?1:0,u=P>=3?1:0,y=F>=2?1:0,f=C>=2?1:0,m=D>=2?1:0,p=P>=2?1:0,_=F>=1?1:0,g=C>=1?1:0,k=D>=1?1:0,v=P>=1?1:0;var I=T-(c=F>=3?1:0)+this.G4,N=b-d+this.G4,R=S-l+this.G4,z=A-u+this.G4,K=T-y+2*this.G4,G=b-f+2*this.G4,q=S-m+2*this.G4,Y=A-p+2*this.G4,E=T-_+3*this.G4,U=b-g+3*this.G4,V=S-k+3*this.G4,j=A-v+3*this.G4,$=T-1+4*this.G4,X=b-1+4*this.G4,H=S-1+4*this.G4,W=A-1+4*this.G4,Z=255&w,J=255&O,Q=255&M,ee=255&B,te=.6-T*T-b*b-S*S-A*A;if(te<0)r=0;else{te*=te;var se=this.perm[Z+this.perm[J+this.perm[Q+this.perm[ee]]]]%32;r=te*te*(this.grad4[se]*T+this.grad4[se]*b+this.grad4[se]*S+this.grad4[se]*A)}var ie=.6-I*I-N*N-R*R-z*z;if(ie<0)n=0;else{ie*=ie;var re=this.perm[Z+c+this.perm[J+d+this.perm[Q+l+this.perm[ee+u]]]]%32;n=ie*ie*(this.grad4[re]*I+this.grad4[re]*N+this.grad4[re]*R+this.grad4[re]*z)}var ne=.6-K*K-G*G-q*q-Y*Y;if(ne<0)o=0;else{ne*=ne;var oe=this.perm[Z+y+this.perm[J+f+this.perm[Q+m+this.perm[ee+p]]]]%32;o=ne*ne*(this.grad4[oe]*K+this.grad4[oe]*G+this.grad4[oe]*q+this.grad4[oe]*Y)}var ae=.6-E*E-U*U-V*V-j*j;if(ae<0)a=0;else{ae*=ae;var he=this.perm[Z+_+this.perm[J+g+this.perm[Q+k+this.perm[ee+v]]]]%32;a=ae*ae*(this.grad4[he]*E+this.grad4[he]*U+this.grad4[he]*V+this.grad4[he]*j)}var ce=.6-$*$-X*X-H*H-W*W;if(ce<0)h=0;else{ce*=ce;var de=this.perm[Z+1+this.perm[J+1+this.perm[Q+1+this.perm[ee+1]]]]%32;h=ce*ce*(this.grad4[de]*$+this.grad4[de]*X+this.grad4[de]*H+this.grad4[de]*W)}return 27*(r+n+o+a+h)}noise(...e){this.fResult=0;let t=e[0],s=e[1],i=e[2],r=e[3];for(let n=0;n<this.iOctaves;n++)switch(this.fFreq=this.aOctFreq[n],this.fPers=this.aOctPers[n],e.length){case 4:this.fResult+=this.fPers*this.noise4D(this.fFreq*t,this.fFreq*s,this.fFreq*i,this.fFreq*r);break;case 3:this.fResult+=this.fPers*this.noise3D(this.fFreq*t,this.fFreq*s,this.fFreq*i);break;default:this.fResult+=this.fPers*this.noise2D(this.fFreq*t,this.fFreq*s)}return.5*(this.fResult*this.fPersMax+1)}noiseDetail(e,t){this.iOctaves=e||this.iOctaves,this.fPersistence=t||this.fPersistence,this.octaveFreq()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Forward=4]="Forward",e[e.Backward=8]="Backward",e[e.Top=16]="Top",e[e.Bottom=32]="Bottom",e[e.Z_Axis=3]="Z_Axis",e[e.X_Axis=12]="X_Axis",e[e.Y_Axis=48]="Y_Axis",e[e.All=63]="All"}(t.Side||(t.Side={}))}]);